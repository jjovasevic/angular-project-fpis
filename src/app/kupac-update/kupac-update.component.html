<form [formGroup]="customerUpdateFormGroup" (ngSubmit)="onSubmit()">

    <div class="form-area">
        <h3>Izmena kupca</h3>
        <br>
        
        <div class="row">
            <div class="col-md-2"><label>pib</label></div>
            <div class="col-md-9">
                <div class="input-space">
                    <input formControlName ="pib" type="text" readonly="true"/>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-2"><label>Naziv kupca</label></div>
            <div class="col-md-9">
                <div class="input-space">
                    <input formControlName ="naziv_kupca" type="text">
                    <!-- validacija -->
                    <div *ngIf="naziv_kupca?.invalid && (naziv_kupca?.dirty  || naziv_kupca?.touched)" class="alert alert-danger mt1">
                        <div *ngIf="naziv_kupca?.errors?.required || naziv_kupca?.errors?.whiteSpace">
                            Polje naziv kupca je obavezno!
                        </div>
                        <div *ngIf="naziv_kupca?.errors?.minlength">
                            Polje naziv kupca mora imati minimalno 6 karaktera.
                        </div>
                        <div *ngIf="naziv_kupca?.errors?.maxlength">
                            Polje naziv kupca ne sme imati vise od 30 karaktera.
                        </div>
                        <div *ngIf="naziv_kupca?.errors?.pattern">
                            Polje naziv kupca sme da sadrzi samo slova.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-2"><label>Email kupca</label></div>
            <div class="col-md-9">
                <div class="input-space">
                    <input formControlName ="email_kupca" type="text">
                    <div *ngIf="email_kupca?.invalid && (email_kupca?.dirty || email_kupca?.touched)" class="alert alert-danger mt1">
                        <div *ngIf="email_kupca?.errors?.required || email_kupca?.errors?.whiteSpace">
                            Polje email kupca je obavezno.
                        </div>
                        <div *ngIf="email_kupca?.errors?.pattern">
                            Unesite Vas pravi email.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-2"><label>Telefon kupca</label></div>
            <div class="col-md-9">
                <div class="input-space">
                    <input formControlName ="telefon_kupca" type="text">
                    <!-- validacija -->
                    <div *ngIf="telefon_kupca?.invalid && (telefon_kupca?.dirty  || telefon_kupca?.touched)"
                        class="alert alert-danger mt1">
                        <div *ngIf="telefon_kupca?.errors?.required || telefon_kupca?.errors?.whiteSpace">
                            Polje telefon kupca je obavezno!
                        </div>
                        <div *ngIf="telefon_kupca?.errors?.minlength">
                            Polje telefon kupca mora imati minimalno 9 karaktera.
                        </div>
                        <div *ngIf="telefon_kupca?.errors?.maxlength">
                            Polje telefon kupca ne sme imati vise od 20 karaktera.
                        </div>
                        <div *ngIf="telefon_kupca?.errors?.pattern">
                            Polje telefon kupca sme da sadrzi samo brojeve.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-2"><label>Potpis kupca</label></div>
            <div class="col-md-9">
                <div class="input-space">
                    <input formControlName ="potpis" type="text">
                    
                    <!-- validacija -->
                    <div *ngIf="potpis?.invalid && (potpis?.dirty  || potpis?.touched)" class="alert alert-danger mt1">
                        <div *ngIf="potpis?.errors?.required || potpis?.errors?.whiteSpace">
                            Polje potpis kupca je obavezno!
                        </div>
                        <div *ngIf="potpis?.errors?.minlength">
                            Polje potpis kupca mora imati minimalno 2 karaktera.
                        </div>
                        <div *ngIf="potpis?.errors?.maxlength">
                            Polje potpis kupca ne sme imati vise od 20 karaktera.
                        </div>
                        <div *ngIf="potpis?.errors?.pattern">
                            Polje potpis sme da sadrzi samo slova.
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-2"><label>Grad</label></div>
            <div class="col-md-9">
                <div class="input-space">
                    <select formControlName ="grad" (change)="getStreets()">
                        <option selected hidden [value]="customer.adresa.ulica.grad" > {{customer.adresa.ulica.grad.postanski_broj}} | {{customer.adresa.ulica.grad.naziv_grada}}</option>
                        <option *ngFor="let city of cities" [ngValue]="city">
                            {{city.postanski_broj}} | {{city.naziv_grada}}
                        </option>
                    </select>
                    <!-- validacija -->
                    <div *ngIf="grad?.invalid && (grad?.dirty || grad?.touched)" class="alert alert-danger mt1">
                        <div *ngIf="grad?.errors?.required">
                            Polje grad mora biti popunjeno.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-2"><label>Ulica</label></div>
            <div class="col-md-9">
                <div class="input-space">
                    <select formControlName ="ulica" (change)="getAdress()">
                        <option selected hidden [value]="customer.adresa.ulica" > {{customer.adresa.ulica.id.sifra_ulice}} | {{customer.adresa.ulica.naziv_ulice}}</option>
                        <option *ngFor="let street of streets" [ngValue]="street">
                            {{street.id.sifra_ulice}} | {{street.naziv_ulice}}
                        </option>
                    </select>
                     <!-- validacija -->
                     <div *ngIf="ulica?.invalid && (ulica?.dirty || ulica?.touched)" class="alert alert-danger mt1">
                        <div *ngIf="ulica?.errors?.required">
                            Polje ulica mora biti popunjeno. Popunjava se nakon popunjavanja polja grad.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-2"><label>Adresa</label></div>
            <div class="col-md-9">
                <div class="input-space">
                    <select formControlName ="adresa">
                        <option selected hidden [value]="customer.adresa" > {{customer.adresa.id.adresa_ID}}</option>
                        <option *ngFor="let adr of adress" [ngValue]="adr">
                            {{adr.id.adresa_ID}}
                        </option>
                    </select>
                    <!-- validacija -->
                    <div *ngIf="adresa?.invalid && (adresa?.dirty || adresa?.touched)" class="alert alert-danger mt1">
                        <div *ngIf="adresa?.errors?.required">
                            Polje adresa mora biti popunjeno. Popunjava se nakon popunjavanja polja ulica.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-2"><label>Zaposleni</label></div>
            <div class="col-md-9">
                <div class="input-space">
                    <select formControlName ="zaposleni">
                        <option selected hidden [value]="customer.zaposleni" > {{customer.zaposleni.jmbg}} | {{customer.zaposleni.ime_prezime}}</option>
                        <option *ngFor="let employee of employees" [ngValue]="employee">
                            {{employee.jmbg}} | {{employee.ime_prezime}}
                        </option>
                    </select>
                    <!-- validacija -->
                    <div *ngIf="zaposleni?.invalid && (zaposleni?.dirty || zaposleni?.touched)"
                        class="alert alert-danger mt1">
                        <div *ngIf="zaposleni?.errors?.required">
                            Polje zaposleni mora biti popunjeno.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div>
            <button type="submit" class="btn btn-info">Izmeni kupca</button>
        </div>
    </div>

</form>

<br>

<div>
    <button [routerLink]="['/']"class="btn btn-info">Vrati se na pocetnu stranu</button>
</div>
